{
   "components":{
      "schemas":{
         "v1.BadRequest":{
            "properties":{
               "Code":{
                  "type":"string"
               },
               "Status":{
                  "type":"integer"
               },
               "Title":{
                  "type":"string"
               }
            },
            "type":"object"
         },
         "v1.Image":{
            "properties":{
               "Account":{
                  "type":"string"
               },
               "Commit":{
                  "properties":{
                     "Account":{
                        "type":"string"
                     },
                     "Arch":{
                        "type":"string"
                     },
                     "BlueprintToml":{
                        "type":"string"
                     },
                     "BuildDate":{
                        "type":"string"
                     },
                     "BuildNumber":{

                     },
                     "ComposeJobID":{
                        "type":"string"
                     },
                     "ImageBuildHash":{
                        "type":"string"
                     },
                     "ImageBuildParentHash":{
                        "type":"string"
                     },
                     "ImageBuildTarURL":{
                        "type":"string"
                     },
                     "InstalledPackages":{
                        "items":{
                           "properties":{
                              "arch":{
                                 "type":"string"
                              },
                              "epoch":{
                                 "type":"string"
                              },
                              "name":{
                                 "type":"string"
                              },
                              "release":{
                                 "type":"string"
                              },
                              "sigmd5":{
                                 "type":"string"
                              },
                              "signature":{
                                 "type":"string"
                              },
                              "type":{
                                 "type":"string"
                              },
                              "version":{
                                 "type":"string"
                              }
                           },
                           "type":"object"
                        },
                        "type":"array"
                     },
                     "OSTreeCommit":{
                        "type":"string"
                     },
                     "OSTreeParentCommit":{
                        "type":"string"
                     },
                     "OSTreeRef":{
                        "type":"string"
                     },
                     "Packages":{
                        "items":{
                           "properties":{
                              "Name":{
                                 "type":"string"
                              }
                           },
                           "type":"object"
                        },
                        "type":"array"
                     },
                     "Status":{
                        "type":"string"
                     }
                  },
                  "type":"object"
               },
               "CommitID":{

               },
               "Description":{
                  "type":"string"
               },
               "Distribution":{
                  "type":"string"
               },
               "ImageType":{
                  "type":"string"
               },
               "Installer":{
                  "properties":{
                     "Account":{
                        "type":"string"
                     },
                     "ComposeJobID":{
                        "type":"string"
                     },
                     "ImageBuildISOURL":{
                        "type":"string"
                     },
                     "SshKey":{
                        "type":"string"
                     },
                     "Status":{
                        "type":"string"
                     },
                     "Username":{
                        "type":"string"
                     }
                  },
                  "type":"object"
               },
               "InstallerID":{

               },
               "Name":{
                  "type":"string"
               },
               "Status":{
                  "type":"string"
               },
               "Version":{
                  "type":"integer"
               }
            },
            "type":"object"
         },
         "v1.InternalServerError":{
            "properties":{
               "Code":{
                  "type":"string"
               },
               "Status":{
                  "type":"integer"
               },
               "Title":{
                  "type":"string"
               }
            },
            "type":"object"
         },
         "v1.NotFound":{
            "properties":{
               "Code":{
                  "type":"string"
               },
               "Status":{
                  "type":"integer"
               },
               "Title":{
                  "type":"string"
               }
            },
            "type":"object"
         },
         "v1.Repo":{
            "properties":{
               "Commit":{
                  "properties":{
                     "Account":{
                        "type":"string"
                     },
                     "Arch":{
                        "type":"string"
                     },
                     "BlueprintToml":{
                        "type":"string"
                     },
                     "BuildDate":{
                        "type":"string"
                     },
                     "BuildNumber":{

                     },
                     "ComposeJobID":{
                        "type":"string"
                     },
                     "ImageBuildHash":{
                        "type":"string"
                     },
                     "ImageBuildParentHash":{
                        "type":"string"
                     },
                     "ImageBuildTarURL":{
                        "type":"string"
                     },
                     "InstalledPackages":{
                        "items":{
                           "properties":{
                              "arch":{
                                 "type":"string"
                              },
                              "epoch":{
                                 "type":"string"
                              },
                              "name":{
                                 "type":"string"
                              },
                              "release":{
                                 "type":"string"
                              },
                              "sigmd5":{
                                 "type":"string"
                              },
                              "signature":{
                                 "type":"string"
                              },
                              "type":{
                                 "type":"string"
                              },
                              "version":{
                                 "type":"string"
                              }
                           },
                           "type":"object"
                        },
                        "type":"array"
                     },
                     "OSTreeCommit":{
                        "type":"string"
                     },
                     "OSTreeParentCommit":{
                        "type":"string"
                     },
                     "OSTreeRef":{
                        "type":"string"
                     },
                     "Packages":{
                        "items":{
                           "properties":{
                              "Name":{
                                 "type":"string"
                              }
                           },
                           "type":"object"
                        },
                        "type":"array"
                     },
                     "Status":{
                        "type":"string"
                     }
                  },
                  "type":"object"
               },
               "CommitID":{

               },
               "RepoStatus":{
                  "type":"string"
               },
               "RepoURL":{
                  "type":"string"
               }
            },
            "type":"object"
         },
         "v1.Updates":{
            "properties":{
               "CommitID":{
                  "type":"integer"
               },
               "DeviceUUID":{
                  "type":"string"
               }
            }
         }
      }
   },
   "info":{
      "license":{
         "name":"MIT"
      },
      "title":"edge-api",
      "version":"1.0.0"
   },
   "openapi":"3.0.0",
   "paths":{
      "/images":{
         "get":{
            "operationId":"listImages",
            "responses":{
               "200":{
                  "content":{
                     "application/json":{
                        "schema":{
                           "items":{
                              "$ref":"#/components/schemas/v1.Image"
                           },
                           "type":"array"
                        }
                     }
                  },
                  "description":"OK"
               },
               "400":{
                  "content":{
                     "application/json":{
                        "schema":{
                           "$ref":"#/components/schemas/v1.BadRequest"
                        }
                     }
                  },
                  "description":"The request sent couldn't be processed."
               },
               "500":{
                  "content":{
                     "application/json":{
                        "schema":{
                           "$ref":"#/components/schemas/v1.InternalServerError"
                        }
                     }
                  },
                  "description":"There was an internal server error."
               }
            },
            "summary":"Lists all images for an account."
         },
         "post":{
            "operationId":"createImage",
            "requestBody":{
               "content":{
                  "application/json":{
                     "schema":{
                        "$ref":"#/components/schemas/v1.Image"
                     }
                  }
               },
               "required":true
            },
            "responses":{
               "200":{
                  "content":{
                     "application/json":{
                        "schema":{
                           "$ref":"#/components/schemas/v1.Image"
                        }
                     }
                  },
                  "description":"OK"
               },
               "400":{
                  "content":{
                     "application/json":{
                        "schema":{
                           "$ref":"#/components/schemas/v1.BadRequest"
                        }
                     }
                  },
                  "description":"The request sent couldn't be processed."
               },
               "500":{
                  "content":{
                     "application/json":{
                        "schema":{
                           "$ref":"#/components/schemas/v1.InternalServerError"
                        }
                     }
                  },
                  "description":"There was an internal server error."
               }
            },
            "summary":"Composes an image on Image Builder"
         }
      },
      "/images/{imageId}":{
         "get":{
            "operationId":"getImage",
            "parameters":[
               {
                  "description":"ImageID",
                  "in":"path",
                  "name":"imageId",
                  "required":true,
                  "schema":{
                     "type":"integer"
                  }
               }
            ],
            "responses":{
               "200":{
                  "content":{
                     "application/json":{
                        "schema":{
                           "$ref":"#/components/schemas/v1.Image"
                        }
                     }
                  },
                  "description":"OK"
               },
               "400":{
                  "content":{
                     "application/json":{
                        "schema":{
                           "$ref":"#/components/schemas/v1.BadRequest"
                        }
                     }
                  },
                  "description":"The request sent couldn't be processed."
               },
               "500":{
                  "content":{
                     "application/json":{
                        "schema":{
                           "$ref":"#/components/schemas/v1.InternalServerError"
                        }
                     }
                  },
                  "description":"There was an internal server error."
               }
            },
            "summary":"Get an image by id."
         }
      },
      "/images/{imageId}/repo":{
         "get":{
            "description":"Returns the information of the OSTree Repository of a particular Image.",
            "operationId":"getImageRepo",
            "parameters":[
               {
                  "description":"ImageID",
                  "in":"path",
                  "name":"imageId",
                  "required":true,
                  "schema":{
                     "type":"integer"
                  }
               }
            ],
            "responses":{
               "200":{
                  "content":{
                     "application/json":{
                        "schema":{
                           "$ref":"#/components/schemas/v1.Repo"
                        }
                     }
                  },
                  "description":"OK"
               },
               "400":{
                  "content":{
                     "application/json":{
                        "schema":{
                           "$ref":"#/components/schemas/v1.BadRequest"
                        }
                     }
                  },
                  "description":"The request sent couldn't be processed."
               },
               "500":{
                  "content":{
                     "application/json":{
                        "schema":{
                           "$ref":"#/components/schemas/v1.InternalServerError"
                        }
                     }
                  },
                  "description":"There was an internal server error."
               }
            },
            "summary":"Get Image OSTree repo."
         }
      },
      "/images/{imageId}/status":{
         "get":{
            "description":"This method goes to image builder if the image is still building and updates the status if needed.",
            "operationId":"getImageStatus",
            "parameters":[
               {
                  "description":"ImageID",
                  "in":"path",
                  "name":"imageId",
                  "required":true,
                  "schema":{
                     "type":"integer"
                  }
               }
            ],
            "responses":{
               "200":{
                  "content":{
                     "application/json":{
                        "schema":{
                           "properties":{
                              "Status":{
                                 "example":"BUILDING",
                                 "type":"string"
                              }
                           },
                           "type":"object"
                        }
                     }
                  },
                  "description":"OK"
               },
               "400":{
                  "content":{
                     "application/json":{
                        "schema":{
                           "$ref":"#/components/schemas/v1.BadRequest"
                        }
                     }
                  },
                  "description":"The request sent couldn't be processed."
               },
               "500":{
                  "content":{
                     "application/json":{
                        "schema":{
                           "$ref":"#/components/schemas/v1.InternalServerError"
                        }
                     }
                  },
                  "description":"There was an internal server error."
               }
            },
            "summary":"Get image status."
         }
      },
      "/updates":{
         "post":{
            "description":"Returns the information of the update transaction.",
            "operationId":"UpdateDevice",

            "requestBody":{
               "content":{
                  "application/json":{
                     "schema":{
                        "$ref":"#/components/schemas/v1.Updates"
                     }
                  }
               },
               "required":true
            },
            "responses":{
               "200":{
                  "content":{
                     "application/json":{
                        "schema":{
                           "$ref":"#/components/schemas/v1.Updates"
                        }
                     }
                  },
                  "description":"OK"
               },
               "400":{
                  "content":{
                     "application/json":{
                        "schema":{
                           "$ref":"#/components/schemas/v1.BadRequest"
                        }
                     }
                  },
                  "description":"The request sent couldn't be processed."
               },
               "500":{
                  "content":{
                     "application/json":{
                        "schema":{
                           "$ref":"#/components/schemas/v1.BadRequest"
                        }
                     }
                  },
                  "description":"There was an internal server error."
               }
            },
            "summary":"UpdateDevice."
         }
      }
   }
}
