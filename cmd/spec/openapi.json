{"components":{"schemas":{"v1.AddUpdate":{"properties":{"CommitID":{},"DeviceUUID":{"type":"string"}},"type":"object"},"v1.BadRequest":{"properties":{"Code":{"type":"string"},"Status":{"type":"integer"},"Title":{"type":"string"}},"type":"object"},"v1.Image":{"properties":{"Account":{"type":"string"},"Commit":{"properties":{"Account":{"type":"string"},"Arch":{"type":"string"},"BlueprintToml":{"type":"string"},"BuildDate":{"type":"string"},"BuildNumber":{},"ComposeJobID":{"type":"string"},"ImageBuildHash":{"type":"string"},"ImageBuildParentHash":{"type":"string"},"ImageBuildTarURL":{"type":"string"},"InstalledPackages":{"items":{"properties":{"arch":{"type":"string"},"epoch":{"type":"string"},"name":{"type":"string"},"release":{"type":"string"},"sigmd5":{"type":"string"},"signature":{"type":"string"},"type":{"type":"string"},"version":{"type":"string"}},"type":"object"},"type":"array"},"OSTreeCommit":{"type":"string"},"OSTreeParentCommit":{"type":"string"},"OSTreeRef":{"type":"string"},"Packages":{"items":{"properties":{"Name":{"type":"string"}},"type":"object"},"type":"array"},"Status":{"type":"string"}},"type":"object"},"CommitID":{},"Description":{"type":"string"},"Distribution":{"type":"string"},"ID":{},"ImageSetID":{},"ImageType":{"type":"string"},"Installer":{"properties":{"Account":{"type":"string"},"Checksum":{"type":"string"},"ComposeJobID":{"type":"string"},"ImageBuildISOURL":{"type":"string"},"SshKey":{"type":"string"},"Status":{"type":"string"},"Username":{"type":"string"}},"type":"object"},"InstallerID":{},"Name":{"type":"string"},"OutputTypes":{"items":{"type":"string"},"type":"array"},"ParentId":{},"Status":{"type":"string"},"Version":{"type":"integer"}},"type":"object"},"v1.InternalServerError":{"properties":{"Code":{"type":"string"},"Status":{"type":"integer"},"Title":{"type":"string"}},"type":"object"},"v1.NotFound":{"properties":{"Code":{"type":"string"},"Status":{"type":"integer"},"Title":{"type":"string"}},"type":"object"},"v1.Repo":{"properties":{"Commit":{"properties":{"Account":{"type":"string"},"Arch":{"type":"string"},"BlueprintToml":{"type":"string"},"BuildDate":{"type":"string"},"BuildNumber":{},"ComposeJobID":{"type":"string"},"ImageBuildHash":{"type":"string"},"ImageBuildParentHash":{"type":"string"},"ImageBuildTarURL":{"type":"string"},"InstalledPackages":{"items":{"properties":{"arch":{"type":"string"},"epoch":{"type":"string"},"name":{"type":"string"},"release":{"type":"string"},"sigmd5":{"type":"string"},"signature":{"type":"string"},"type":{"type":"string"},"version":{"type":"string"}},"type":"object"},"type":"array"},"OSTreeCommit":{"type":"string"},"OSTreeParentCommit":{"type":"string"},"OSTreeRef":{"type":"string"},"Packages":{"items":{"properties":{"Name":{"type":"string"}},"type":"object"},"type":"array"},"Status":{"type":"string"}},"type":"object"},"CommitID":{},"RepoStatus":{"type":"string"},"RepoURL":{"type":"string"}},"type":"object"},"v1.UpdateTransaction":{"properties":{"Account":{"type":"string"},"Commit":{"properties":{"Account":{"type":"string"},"Arch":{"type":"string"},"BlueprintToml":{"type":"string"},"BuildDate":{"type":"string"},"BuildNumber":{},"ComposeJobID":{"type":"string"},"ImageBuildHash":{"type":"string"},"ImageBuildParentHash":{"type":"string"},"ImageBuildTarURL":{"type":"string"},"InstalledPackages":{"items":{"properties":{"arch":{"type":"string"},"epoch":{"type":"string"},"name":{"type":"string"},"release":{"type":"string"},"sigmd5":{"type":"string"},"signature":{"type":"string"},"type":{"type":"string"},"version":{"type":"string"}},"type":"object"},"type":"array"},"OSTreeCommit":{"type":"string"},"OSTreeParentCommit":{"type":"string"},"OSTreeRef":{"type":"string"},"Packages":{"items":{"properties":{"Name":{"type":"string"}},"type":"object"},"type":"array"},"Status":{"type":"string"}},"type":"object"},"CommitID":{},"Devices":{"items":{},"type":"array"},"DispatchRecords":{"items":{"properties":{"Device":{},"DeviceID":{},"PlaybookDispatcherID":{"type":"string"},"PlaybookURL":{"type":"string"},"Status":{"type":"string"}},"type":"object"},"type":"array"},"OldCommits":{"items":{"properties":{"Account":{"type":"string"},"Arch":{"type":"string"},"BlueprintToml":{"type":"string"},"BuildDate":{"type":"string"},"BuildNumber":{},"ComposeJobID":{"type":"string"},"ImageBuildHash":{"type":"string"},"ImageBuildParentHash":{"type":"string"},"ImageBuildTarURL":{"type":"string"},"InstalledPackages":{"items":{"properties":{"arch":{"type":"string"},"epoch":{"type":"string"},"name":{"type":"string"},"release":{"type":"string"},"sigmd5":{"type":"string"},"signature":{"type":"string"},"type":{"type":"string"},"version":{"type":"string"}},"type":"object"},"type":"array"},"OSTreeCommit":{"type":"string"},"OSTreeParentCommit":{"type":"string"},"OSTreeRef":{"type":"string"},"Packages":{"items":{"properties":{"Name":{"type":"string"}},"type":"object"},"type":"array"},"Status":{"type":"string"}},"type":"object"},"type":"array"},"Repo":{"properties":{"Commit":{"properties":{"Account":{"type":"string"},"Arch":{"type":"string"},"BlueprintToml":{"type":"string"},"BuildDate":{"type":"string"},"BuildNumber":{},"ComposeJobID":{"type":"string"},"ImageBuildHash":{"type":"string"},"ImageBuildParentHash":{"type":"string"},"ImageBuildTarURL":{"type":"string"},"InstalledPackages":{"items":{"properties":{"arch":{"type":"string"},"epoch":{"type":"string"},"name":{"type":"string"},"release":{"type":"string"},"sigmd5":{"type":"string"},"signature":{"type":"string"},"type":{"type":"string"},"version":{"type":"string"}},"type":"object"},"type":"array"},"OSTreeCommit":{"type":"string"},"OSTreeParentCommit":{"type":"string"},"OSTreeRef":{"type":"string"},"Packages":{"items":{"properties":{"Name":{"type":"string"}},"type":"object"},"type":"array"},"Status":{"type":"string"}},"type":"object"},"CommitID":{},"RepoStatus":{"type":"string"},"RepoURL":{"type":"string"}},"type":"object"},"RepoID":{},"Status":{"type":"string"},"Tag":{"type":"string"}},"type":"object"}}},"info":{"license":{"name":"MIT"},"title":"edge-api","version":"1.0.0"},"openapi":"3.0.0","paths":{"/images":{"get":{"operationId":"listImages","responses":{"200":{"content":{"application/json":{"schema":{"properties":{"count":{"example":100,"type":"integer"},"data":{"items":{"$ref":"#/components/schemas/v1.Image"},"type":"array"}},"type":"object"}}},"description":"OK"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.BadRequest"}}},"description":"The request sent couldn't be processed."},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.InternalServerError"}}},"description":"There was an internal server error."}},"summary":"Lists all images for an account."},"post":{"operationId":"createImage","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.Image"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.Image"}}},"description":"OK"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.BadRequest"}}},"description":"The request sent couldn't be processed."},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.InternalServerError"}}},"description":"There was an internal server error."}},"summary":"Composes an image on Image Builder"}},"/images/{imageId}":{"get":{"operationId":"getImage","parameters":[{"description":"ImageID","in":"path","name":"imageId","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.Image"}}},"description":"OK"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.BadRequest"}}},"description":"The request sent couldn't be processed."},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.InternalServerError"}}},"description":"There was an internal server error."}},"summary":"Get an image by id."}},"/images/{imageId}/repo":{"get":{"description":"Returns the information of the OSTree Repository of a particular Image.","operationId":"getImageRepo","parameters":[{"description":"ImageID","in":"path","name":"imageId","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.Repo"}}},"description":"OK"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.BadRequest"}}},"description":"The request sent couldn't be processed."},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.InternalServerError"}}},"description":"There was an internal server error."}},"summary":"Get Image OSTree repo."}},"/images/{imageId}/status":{"get":{"description":"This method goes to image builder if the image is still building and updates the status if needed.","operationId":"getImageStatus","parameters":[{"description":"ImageID","in":"path","name":"imageId","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"Status":{"example":"BUILDING","type":"string"}},"type":"object"}}},"description":"OK"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.BadRequest"}}},"description":"The request sent couldn't be processed."},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.InternalServerError"}}},"description":"There was an internal server error."}},"summary":"Get image status."}},"/images/{imageId}/update":{"post":{"operationId":"CreateImageUpdate","parameters":[{"description":"ImageID","in":"path","name":"imageId","required":true,"schema":{"type":"integer"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.Image"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.Image"}}},"description":"OK"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.BadRequest"}}},"description":"The request sent couldn't be processed."},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.InternalServerError"}}},"description":"There was an internal server error."}},"summary":"Composes an Update for a image"}},"/updates":{"post":{"description":"Executes a device update.","operationId":"UpdateDevice","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.AddUpdate"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.UpdateTransaction"}}},"description":"OK"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.BadRequest"}}},"description":"The request sent couldn't be processed."},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.BadRequest"}}},"description":"There was an internal server error."}},"summary":"Executes a device update."}},"/updates/device/{DeviceUUID}/image":{"get":{"description":"Return image running on device.","operationId":"GetImageInfo","parameters":[{"description":"DeviceUUID","in":"path","name":"DeviceUUID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.Image"}}},"description":"OK"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.BadRequest"}}},"description":"The request sent couldn't be processed."},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.InternalServerError"}}},"description":"There was an internal server error."}},"summary":"Return image running on device."}},"/updates/device/{DeviceUUID}/updates":{"get":{"description":"Return list of available updates for a device.","operationId":"GetUpdateAvailableForDevice","parameters":[{"description":"DeviceUUID","in":"path","name":"DeviceUUID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.Image"}}},"description":"OK"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.BadRequest"}}},"description":"The request sent couldn't be processed."},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.InternalServerError"}}},"description":"There was an internal server error."}},"summary":"Return list of available updates for a device."}},"/updates/{updateID}/update-playbook.yml":{"get":{"operationId":"GetUpdatePlaybook","parameters":[{"description":"An unique ID to identify the update the playbook belongs to","in":"path","name":"updateID","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"content":{"text/plain":{"schema":{"example":"ansible playbook for an update","type":"string"}}},"description":"OK"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.BadRequest"}}},"description":"The request sent couldn't be processed."},"500":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/v1.InternalServerError"}}},"description":"There was an internal server error."}}}}}}